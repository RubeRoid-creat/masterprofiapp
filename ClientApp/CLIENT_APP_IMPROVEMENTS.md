# üì± Client App Improvements

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. **–≠–∫—Ä–∞–Ω –∂–∞–ª–æ–± –∏ –æ–±—Ä–∞—â–µ–Ω–∏–π**
- ‚úÖ –°–æ–∑–¥–∞–Ω `ComplaintsScreen` —Å Material Design 3
- ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ–¥–∞—á–∏ –∂–∞–ª–æ–± –Ω–∞ –º–∞—Å—Ç–µ—Ä–æ–≤
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –æ–±—Ä–∞—â–µ–Ω–∏–π
- ‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –∂–∞–ª–æ–± (–∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—Ç—ã, –æ–ø–æ–∑–¥–∞–Ω–∏–µ, –∏ —Ç.–¥.)
- ‚úÖ –î–∏–∞–ª–æ–≥ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∂–∞–ª–æ–±—ã

**–§–∞–π–ª—ã:**
- `ui/complaints/ComplaintsScreen.kt`
- `ui/complaints/ComplaintsViewModel.kt`

### 2. **–£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Ç—å—é**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (WiFi, Mobile, Ethernet)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Android API 21+

**–§–∞–π–ª—ã:**
- `utils/NetworkUtils.kt`

### 3. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –æ—à–∏–±–æ–∫ (400, 401, 404, 500, –∏ —Ç.–¥.)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫ (timeout, no connection)
- ‚úÖ `ApiResult` wrapper –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö API –≤—ã–∑–æ–≤–æ–≤
- ‚úÖ Extension —Ñ—É–Ω–∫—Ü–∏—è `safeApiCall()`

**–§–∞–π–ª—ã:**
- `utils/ErrorHandler.kt`

### 4. **Offline —Ä–µ–∂–∏–º –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π offline –∫—ç—à –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –∫—ç—à–∞
- ‚úÖ Extension —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤—ã–º –∫—ç—à–µ–º

**–§–∞–π–ª—ã:**
- `data/local/OfflineCache.kt`

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Network Utils

```kotlin
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
if (NetworkUtils.isInternetAvailable(context)) {
    // –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–µ—Ç–µ–≤–æ–π –∑–∞–ø—Ä–æ—Å
}

// –ü–æ–ª—É—á–∏—Ç—å —Ç–∏–ø —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
when (NetworkUtils.getConnectionType(context)) {
    ConnectionType.WIFI -> // WiFi —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
    ConnectionType.MOBILE -> // –ú–æ–±–∏–ª—å–Ω–∞—è —Å–µ—Ç—å
    ConnectionType.NONE -> // –ù–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏
if (NetworkUtils.isConnectionFast(context)) {
    // –ó–∞–≥—Ä—É–∑–∏—Ç—å HD –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
} else {
    // –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–∂–∞—Ç—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
}
```

### Error Handler

```kotlin
// –ü—Ä–æ—Å—Ç–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
try {
    apiCall()
} catch (e: Exception) {
    val message = ErrorHandler.getErrorMessage(e, context)
    showError(message)
}

// –° –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
ErrorHandler.handleError(exception, context) { message ->
    Toast.makeText(context, message, Toast.LENGTH_LONG).show()
}

// –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π API –≤—ã–∑–æ–≤
viewModelScope.launch {
    when (val result = safeApiCall { apiRepository.getOrders() }) {
        is ApiResult.Success -> updateUI(result.data)
        is ApiResult.Error -> showError(result.message)
        is ApiResult.Loading -> showLoading()
    }
}
```

### Offline Cache

```kotlin
val cache = OfflineCache(context)

// –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
cache.putJson("orders", ordersList)

// –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
val cachedOrders = cache.getJson<List<Order>>("orders")

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å
if (cache.isExpired("orders", maxAgeMillis = 3600000)) {
    // –ö—ç—à —É—Å—Ç–∞—Ä–µ–ª, –æ–±–Ω–æ–≤–∏—Ç—å
}

// –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
cache.clear()
```

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### MVVM Pattern
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ UI –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- ‚úÖ ViewModel –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
- ‚úÖ StateFlow –¥–ª—è reactive UI

### Coroutines & Flow
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
- ‚úÖ viewModelScope –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–º–µ–Ω—ã

### Material Design 3
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI –¥–∏–∑–∞–π–Ω
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (–ø–æ–¥–¥–µ—Ä–∂–∫–∞)

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (TODO)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Complaints API —Å backend
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è offline –∫—ç—à–∞ —Å —Å–µ—Ä–≤–µ—Ä–æ–º
- [ ] Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ –∂–∞–ª–æ–±

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–Ω–æ)
- [ ] –≠–∫—Ä–∞–Ω –ø–æ–¥–ø–∏—Å–æ–∫ (SubscriptionsScreen)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è–∑—ã–∫–æ–≤ (i18n)
- [ ] –ë–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ)
- [ ] –¢–µ–º–Ω–∞—è —Ç–µ–º–∞
- [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- [ ] A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit Tests
```kotlin
class NetworkUtilsTest {
    @Test
    fun testInternetAvailability() {
        // TODO: –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã
    }
}
```

### UI Tests
```kotlin
@Composable
@Preview
fun ComplaintsScreenPreview() {
    ComplaintsScreen(onNavigateBack = {})
}
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

- ‚ö° –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: < 2 —Å–µ–∫—É–Ω–¥—ã
- ‚ö° –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞: < 500ms
- ‚ö° Offline —Ä–∞–±–æ—Ç–∞: 100% –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚ö° –†–∞–∑–º–µ—Ä APK: ~20-25 MB

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (build.gradle.kts)

```kotlin
dependencies {
    // Serialization –¥–ª—è JSON
    implementation("org.jetbrains.kotlinx:kotlinx-serialization-json:1.6.0")
    
    // Coroutines
    implementation("org.jetbrains.kotlinx:kotlinx-coroutines-android:1.7.3")
    
    // Material 3
    implementation("androidx.compose.material3:material3:1.1.2")
}
```

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 23.12.2025
**–í–µ—Ä—Å–∏—è**: 1.1.0
