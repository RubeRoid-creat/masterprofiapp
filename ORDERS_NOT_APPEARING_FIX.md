# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ó–∞—è–≤–∫–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è —É –º–∞—Å—Ç–µ—Ä–∞

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. **–£–±—Ä–∞–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞—è–≤–æ–∫**
   - –¢–µ–ø–µ—Ä—å –º–∞—Å—Ç–µ—Ä–∞ **–º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å –∑–∞—è–≤–∫–∏** –¥–∞–∂–µ –±–µ–∑ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
   - –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è** –∑–∞–∫–∞–∑–æ–≤
   - –§–∞–π–ª—ã: `backend/routes/assignments.js`, `backend/routes/orders.js`

### 2. **–î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ WebSocket**
   - –¢–µ–ø–µ—Ä—å –≤–∏–¥–Ω–æ, –∫–æ–≥–¥–∞ WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∏–ª–∏ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
   - –§–∞–π–ª: `backend/services/assignment-service.js`

### 3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ –±–µ–∑ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü**
   - –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ—Ç —Ç–∞–±–ª–∏—Ü—ã `master_promotions`
   - –§–∞–π–ª: `backend/services/assignment-service.js`

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã:

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç:
```bash
cd backend
node scripts/check-assignments.js
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç:
- ‚úÖ –í—Å–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ
- ‚úÖ –ó–∞–∫–∞–∑—ã –±–µ–∑ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π  
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∫ WebSocket
- ‚úÖ Pending –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è (–æ–∂–∏–¥–∞—é—â–∏–µ –æ—Ç–≤–µ—Ç–∞)

## üì± –ü–æ—á–µ–º—É –∑–∞—è–≤–∫–∏ –º–æ–≥—É—Ç –Ω–µ –ø–æ—è–≤–ª—è—Ç—å—Å—è:

### **–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

1. **–ú–∞—Å—Ç–µ—Ä –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ WebSocket**
   - –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ –∏–ª–∏ –Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ - –∑–∞—è–≤–∫–∞ –Ω–µ –ø—Ä–∏–¥–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
   - ‚ö†Ô∏è **–†–ï–®–ï–ù–ò–ï:** –ó–∞—è–≤–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—Ä–æ—Å–µ —á–µ—Ä–µ–∑ API (`/api/assignments/my`)

2. **–ú–∞—Å—Ç–µ—Ä –Ω–µ –Ω–∞ —Å–º–µ–Ω–µ**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: `is_on_shift = 1` –∏ `status = 'available'`
   - ‚ö†Ô∏è **–†–ï–®–ï–ù–ò–ï:** –í–∫–ª—é—á–∏—Ç—å —Å–º–µ–Ω—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å:
     ```bash
     node scripts/fix-masters-for-testing.js
     ```

3. **–ú–∞—Å—Ç–µ—Ä –Ω–µ –∏–º–µ–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏**
   - –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ç–∏–ø–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –∑–∞–∫–∞–∑–µ
   - ‚ö†Ô∏è **–†–ï–®–ï–ù–ò–ï:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤ –ø—Ä–æ—Ñ–∏–ª–µ

4. **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å—Ç–µ–∫–ª–æ**
   - Pending –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∏–º–µ—é—Ç —Ç–∞–π–º–∞—É—Ç 5-15 –º–∏–Ω—É—Ç
   - ‚ö†Ô∏è **–†–ï–®–ï–ù–ò–ï:** –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ –∏–ª–∏ –¥–æ–∂–¥–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

## üöÄ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### 1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–∞—Å—Ç–µ—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:
```bash
cd backend
node scripts/fix-masters-for-testing.js
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑:
```bash
node scripts/create-test-order.js
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è:
```bash
node scripts/check-assignments.js
```

### 4. –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –º–∞—Å—Ç–µ—Ä–∞:
   - –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–¥–ª—è WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª "–ó–∞—è–≤–∫–∏" –∏–ª–∏ "–ù–∞–∑–Ω–∞—á–µ–Ω–∏—è"
   - –ó–∞—è–≤–∫–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ API –∑–∞–ø—Ä–æ—Å

## üìã API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞—è–≤–æ–∫:

1. **–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –º–∞—Å—Ç–µ—Ä–∞:**
   ```
   GET /api/assignments/my?status=pending
   ```
   - –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç **–ë–ï–ó –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏**
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ pending –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

2. **–ü–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –∑–∞–∫–∞–∑–∞:**
   ```
   GET /api/assignments/order/:orderId/active
   ```
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ, –µ—Å–ª–∏ –º–∞—Å—Ç–µ—Ä –ø–æ–¥—Ö–æ–¥–∏—Ç

## ‚ö†Ô∏è –í–∞–∂–Ω–æ:

1. **WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞:**
   - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ
   - –ú–∞—Å—Ç–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
   - –ï—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–µ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

2. **–ï—Å–ª–∏ WebSocket –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
   - –ó–∞—è–≤–∫–∏ –≤—Å–µ —Ä–∞–≤–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ API
   - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å `/api/assignments/my`
   - –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞—è–≤–∫–∏ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

3. **–î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏:**
   - –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç WebSocket
   - –ú–∞—Å—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω

## üéØ –ò—Ç–æ–≥:

‚úÖ –°–∏—Å—Ç–µ–º–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ –ú–∞—Å—Ç–µ—Ä–∞ –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å –∑–∞—è–≤–∫–∏ –±–µ–∑ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚úÖ –ó–∞—è–≤–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ API –¥–∞–∂–µ –±–µ–∑ WebSocket
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞ - –∑–∞—è–≤–∫–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —á–µ—Ä–µ–∑ API!


