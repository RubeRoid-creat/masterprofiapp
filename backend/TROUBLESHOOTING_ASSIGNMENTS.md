# üîß –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´: –ó–ê–ö–ê–ó–´ –ù–ï –ü–û–Ø–í–õ–Ø–Æ–¢–°–Ø –í –ü–†–ò–õ–û–ñ–ï–ù–ò–ò –ú–ê–°–¢–ï–†–ê

## ‚úÖ –ß–ï–ö-–õ–ò–°–¢ –ü–†–û–í–ï–†–ö–ò

### 1. **–û–±–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä**
```bash
ssh root@212.74.227.208
cd ~/masterprofiapp/backend
git pull origin main
pm2 restart all
```

### 2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É**
```bash
cd ~/masterprofiapp/backend
node scripts/diagnose-assignments.js
```

## üîç –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–ò–ß–ò–ù–´ –ò –†–ï–®–ï–ù–ò–Ø

### –ü—Ä–∏—á–∏–Ω–∞ 1: –ú–∞—Å—Ç–µ—Ä –Ω–µ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
**–°–∏–º–ø—Ç–æ–º—ã:**
- –í –ª–æ–≥–∞—Ö –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏: `‚ùå pending/not_verified`
- API `/api/assignments/my` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 403

**–†–µ—à–µ–Ω–∏–µ:**
1. –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: http://212.74.227.208:3000/admin
2. –ù–∞–π–¥–∏—Ç–µ –º–∞—Å—Ç–µ—Ä–∞
3. –ò–∑–º–µ–Ω–∏—Ç–µ —Å—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ `verified`

**–ò–ª–∏ —á–µ—Ä–µ–∑ SQL:**
```bash
cd ~/masterprofiapp/backend
sqlite3 database/database.sqlite
```
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∞—Å—Ç–µ—Ä–æ–≤
SELECT id, user_id, verification_status FROM masters;

-- –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Ç–µ—Ä–∞
UPDATE masters SET verification_status = 'verified' WHERE user_id = <ID>;
.quit
```

### –ü—Ä–∏—á–∏–Ω–∞ 2: –ú–∞—Å—Ç–µ—Ä –Ω–µ –Ω–∞ —Å–º–µ–Ω–µ
**–°–∏–º–ø—Ç–æ–º—ã:**
- –í –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ: `‚ùå –ù–µ –Ω–∞ —Å–º–µ–Ω–µ`
- `is_on_shift = 0`

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞
2. –ù–∞ —ç–∫—Ä–∞–Ω–µ "–ó–∞–∫–∞–∑—ã" –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–ù–∞—á–∞—Ç—å —Å–º–µ–Ω—É"**

### –ü—Ä–∏—á–∏–Ω–∞ 3: –ù–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–µ–π —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
**–°–∏–º–ø—Ç–æ–º—ã:**
- –í –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ: `–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: –ù–ï–¢` –∏–ª–∏ –Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç –∫ —Ç–∏–ø—É –∑–∞–∫–∞–∑–∞
- –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω, –Ω–æ assignment –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ü—Ä–æ—Ñ–∏–ª—å**
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ä–∞–∑–¥–µ–ª **"–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏"**
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø—ã —Ç–µ—Ö–Ω–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫", "–°—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞")

### –ü—Ä–∏—á–∏–Ω–∞ 4: –°–µ—Ä–≤–µ—Ä –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω
**–°–∏–º–ø—Ç–æ–º—ã:**
- –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –∫–æ–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- `git log` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –∫–æ–º–º–∏—Ç—ã

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd ~/masterprofiapp/backend
git fetch origin
git reset --hard origin/main
npm install
pm2 restart all
```

### –ü—Ä–∏—á–∏–Ω–∞ 5: Assignment –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
**–°–∏–º–ø—Ç–æ–º—ã:**
- –ó–∞–∫–∞–∑ –µ—Å—Ç—å, –Ω–æ assignments –ø—É—Å—Ç–æ
- –í –ª–æ–≥–∞—Ö –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç `notifyMasters`

**–†–µ—à–µ–Ω–∏–µ - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**
```bash
pm2 logs server --lines 100
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è:
```
üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∑–∞–∫–∞–∑–∞ #X
‚úÖ –í—ã–±—Ä–∞–Ω –º–∞—Å—Ç–µ—Ä #Y
‚úÖ –°–æ–∑–¥–∞–Ω–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ #Z
```

–ï—Å–ª–∏ –∏—Ö –Ω–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –º–∞—Å—Ç–µ—Ä –ø–æ–¥—Ö–æ–¥–∏—Ç (—Å–º–µ–Ω–∞ + –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è + —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `pm2 restart all`

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∞—Å—Ç–µ—Ä–∞
```bash
node scripts/diagnose-assignments.js
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- ‚úÖ –ù–ê –°–ú–ï–ù–ï
- ‚úÖ –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
- –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: [—Å–ø–∏—Å–æ–∫ —Ç–∏–ø–æ–≤ —Ç–µ—Ö–Ω–∏–∫–∏]

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑
1. –û—Ç–∫—Ä–æ–π—Ç–µ **–∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
2. –°–æ–∑–¥–∞–π—Ç–µ –∑–∞–∫–∞–∑ –Ω–∞ —Ç–∏–ø —Ç–µ—Ö–Ω–∏–∫–∏ –∏–∑ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–∞—Å—Ç–µ—Ä–∞
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 —Å–µ–∫—É–Ω–¥—ã

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
```bash
node scripts/diagnose-assignments.js
```

–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
```
üìã Pending: 1
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ #X
   –ó–∞–∫–∞–∑: #Y (–•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫, new)
   –ú–∞—Å—Ç–µ—Ä: #Z - –ò–º—è (user_id=...)
   –°—Ç–∞—Ç—É—Å: pending
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —ç–∫—Ä–∞–Ω **"–ó–∞–∫–∞–∑—ã"**
3. –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–∫–∞–∑ —Å –±–∞–∑–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:
   - –ê–¥—Ä–µ—Å
   - –¢–∏–ø —Ç–µ—Ö–Ω–∏–∫–∏
   - –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
   - –¢–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞ (5 –º–∏–Ω—É—Ç)

4. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–∞–∫–∞–∑
5. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã –∫–Ω–æ–ø–∫–∏ **"–ü—Ä–∏–Ω—è—Ç—å"** –∏ **"–û—Ç–∫–ª–æ–Ω–∏—Ç—å"**

## üìû –ï–°–õ–ò –ü–†–û–ë–õ–ï–ú–ê –ù–ï –†–ï–®–ï–ù–ê

1. –°–æ–±–µ—Ä–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
   - –†–µ–∑—É–ª—å—Ç–∞—Ç `node scripts/diagnose-assignments.js`
   - –õ–æ–≥–∏: `pm2 logs server --lines 200 --nostream`
   - –°–∫—Ä–∏–Ω—à–æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–∞—Å—Ç–µ—Ä–∞

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é –∫–æ–¥–∞:
   ```bash
   cd ~/masterprofiapp/backend
   git log --oneline -5
   ```
   
   –ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:
   ```
   08dc89a Fix assignment buttons visibility
   ```

## üîë –ë–´–°–¢–†–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (–µ—Å–ª–∏ –º–∞—Å—Ç–µ—Ä –Ω–µ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω)

```bash
ssh root@212.74.227.208
cd ~/masterprofiapp/backend
sqlite3 database/database.sqlite "UPDATE masters SET verification_status = 'verified' WHERE id = 1;"
```

–ó–∞–º–µ–Ω–∏—Ç–µ `id = 1` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π ID –º–∞—Å—Ç–µ—Ä–∞ –∏–∑ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.


