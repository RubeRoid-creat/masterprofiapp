#!/bin/bash
# –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—Å–µ–º –º–∞—Å—Ç–µ—Ä–∞–º

cd "$(dirname "$0")/.."

echo "üîß –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π"
echo "===================================="
echo ""

# –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
ALL_SPECS='["–•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫","–°—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞","–ü–æ—Å—É–¥–æ–º–æ–µ—á–Ω–∞—è –º–∞—à–∏–Ω–∞","–î—É—Ö–æ–≤–æ–π —à–∫–∞—Ñ","–í–∞—Ä–æ—á–Ω–∞—è –ø–∞–Ω–µ–ª—å","–ú–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∞—è –ø–µ—á—å","–ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä","–ö–æ—Ñ–µ–º–∞—à–∏–Ω–∞","–ù–æ—É—Ç–±—É–∫","–î–µ—Å–∫—Ç–æ–ø","–ú–æ—Ä–æ–∑–∏–ª—å–Ω—ã–π –ª–∞—Ä—å","–í–æ–¥–æ–Ω–∞–≥—Ä–µ–≤–∞—Ç–µ–ª—å"]'

echo "üìã –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö –º–∞—Å—Ç–µ—Ä–æ–≤..."
echo ""

sqlite3 database/database.sqlite <<EOF
UPDATE masters SET specialization = '$ALL_SPECS';
SELECT '–û–±–Ω–æ–≤–ª–µ–Ω–æ –º–∞—Å—Ç–µ—Ä–æ–≤: ' || changes();
EOF

echo ""
echo "‚úÖ –ì–æ—Ç–æ–≤–æ!"
echo ""
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞:"
node scripts/diagnose-assignments.js | grep -A 2 "–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏"


