# Проверка подключения к серверу

## Что было добавлено:

### 1. Автоматическая проверка при запуске
- При запуске приложения автоматически проверяется доступность сервера
- Результат проверки логируется в консоль Android Studio

### 2. Улучшенные сообщения об ошибках
При ошибке подключения пользователь увидит понятное сообщение:

**Пример:**
```
Не удалось подключиться к серверу (http://212.74.227.208:3000/). 
Проверьте:
• Подключение к интернету
• Доступность сервера
• Настройки сети или VPN
```

## Как проверить подключение:

### 1. Через логи Android Studio:
- Откройте Logcat в Android Studio
- Найдите тег "MainActivity" или "RetrofitClient"
- При запуске приложения вы увидите:
  - ✅ "Сервер доступен (код: 200)" - если сервер работает
  - ❌ "Сервер недоступен: ..." - если есть проблемы

### 2. Через командную строку:

**Windows (PowerShell):**
```powershell
# Проверка доступности сервера
Test-NetConnection -ComputerName 212.74.227.208 -Port 3000

# Или через curl
curl http://212.74.227.208:3000/
```

**Linux/Mac:**
```bash
# Проверка порта
nc -zv 212.74.227.208 3000

# Или через curl
curl -I http://212.74.227.208:3000/

# Проверка ping
ping 212.74.227.208
```

## Возможные проблемы и решения:

### Проблема 1: Сервер недоступен
**Симптом:** В логах "Сервер недоступен: Connection refused" или "Connection timed out"

**Решение:**
1. Проверьте, запущен ли сервер на 212.74.227.208:3000
2. Зайдите на сервер через SSH
3. Проверьте статус: `pm2 status` или `ps aux | grep node`
4. Если сервер не запущен: `pm2 start server.js` или `npm start`

### Проблема 2: Проблемы с сетью
**Симптом:** "UnknownHostException" или "Network unreachable"

**Решение:**
1. Проверьте подключение к интернету на устройстве
2. Проверьте, не блокирует ли firewall подключение
3. Отключите VPN, если он активен
4. Проверьте настройки прокси

### Проблема 3: Таймаут
**Симптом:** "SocketTimeoutException: timeout"

**Решение:**
1. Сервер медленно отвечает - проверьте нагрузку на сервере
2. Медленное интернет-соединение - проверьте скорость сети
3. Увеличьте таймаут в коде (сейчас 15 секунд)

### Проблема 4: Неправильный URL
**Симптом:** "404 Not Found" или "UnknownHostException"

**Решение:**
1. Проверьте, что URL сервера правильный: `http://212.74.227.208:3000/`
2. Убедитесь, что порт 3000 открыт на сервере
3. Проверьте, не изменился ли IP-адрес сервера

## Текущие настройки подключения:

- **URL сервера:** `http://212.74.227.208:3000/`
- **Таймаут подключения:** 15 секунд
- **Таймаут чтения:** 30 секунд
- **Автоматическая повторная попытка:** Включена

## Где изменить URL сервера:

Если нужно изменить адрес сервера, отредактируйте файл:
- `app/src/main/java/com/example/bestapp/api/RetrofitClient.kt`
- Строка 19: `const val BASE_URL = "http://212.74.227.208:3000/"`

---

**Для диагностики проблем всегда проверяйте логи Android Studio (Logcat) с тегами:**
- `MainActivity`
- `RetrofitClient`
- `ApiRepository`




