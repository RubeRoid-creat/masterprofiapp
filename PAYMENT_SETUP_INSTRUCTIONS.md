# üìò –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

## üéØ –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å **–ÆKassa** (–ø—Ä–∏–µ–º –ø–ª–∞—Ç–µ–∂–µ–π) –∏ **–ÆMoney** (–≤—ã–ø–ª–∞—Ç—ã –º–∞—Å—Ç–µ—Ä–∞–º).

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ÆKassa (–ø—Ä–∏–µ–º –ø–ª–∞—Ç–µ–∂–µ–π –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤)

### –®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –ÆKassa

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://yookassa.ru/
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –º–∞–≥–∞–∑–∏–Ω
3. –ü—Ä–æ–π–¥–∏—Ç–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ò–ù–ù, –û–ì–†–ù –¥–ª—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü)

### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π

1. –í–æ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç: https://yookassa.ru/my
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" ‚Üí "–ö–ª—é—á–∏ API"
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - **Shop ID** (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–∞–≥–∞–∑–∏–Ω–∞)
   - **Secret Key** (—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á)

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook

1. –í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" ‚Üí "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
2. –£–∫–∞–∂–∏—Ç–µ URL –¥–ª—è webhook:
   ```
   https://your-domain.com/api/payments/webhook/yookassa
   ```
3. –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±—ã—Ç–∏—è:
   - ‚úÖ `payment.succeeded` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
   - ‚úÖ `payment.canceled` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –®–∞–≥ 4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª `.env`:

```env
YOOKASSA_SHOP_ID=your_shop_id_here
YOOKASSA_SECRET_KEY=your_secret_key_here
APP_URL=https://your-domain.com
```

### –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã:
- **–£—Å–ø–µ—à–Ω—ã–π –ø–ª–∞—Ç–µ–∂**: 5555 5555 5555 4444
- **–û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–π –ø–ª–∞—Ç–µ–∂**: 5555 5555 5555 4477
- CVV: –ª—é–±—ã–µ 3 —Ü–∏—Ñ—Ä—ã
- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: –ª—é–±–∞—è –±—É–¥—É—â–∞—è –¥–∞—Ç–∞

---

## üí∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ÆMoney (–≤—ã–ø–ª–∞—Ç—ã –º–∞—Å—Ç–µ—Ä–∞–º)

### –®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –ÆMoney

1. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ—à–µ–ª–µ–∫ –Ω–∞ https://yoomoney.ru/
2. –ü—Ä–æ–π–¥–∏—Ç–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API)

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞: https://yoomoney.ru/docs/payment-buttons
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ü–æ–ª—É—á–∏—Ç–µ:
   - **Client ID**
   - **Client Secret**

### –®–∞–≥ 3: –ü–æ–ª—É—á–µ–Ω–∏–µ OAuth —Ç–æ–∫–µ–Ω–∞

1. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ –ÆMoney:
   ```
   https://yoomoney.ru/oauth/authorize?client_id=YOUR_CLIENT_ID&response_type=code&redirect_uri=YOUR_REDIRECT_URI
   ```
2. –ü–æ–ª—É—á–∏—Ç–µ –∫–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–∑ redirect_uri
3. –û–±–º–µ–Ω—è–π—Ç–µ –∫–æ–¥ –Ω–∞ —Ç–æ–∫–µ–Ω:
   ```bash
   curl -X POST https://yoomoney.ru/oauth/token \
     -d "code=YOUR_CODE" \
     -d "client_id=YOUR_CLIENT_ID" \
     -d "grant_type=authorization_code" \
     -d "redirect_uri=YOUR_REDIRECT_URI" \
     -u "YOUR_CLIENT_ID:YOUR_CLIENT_SECRET"
   ```
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π `access_token`

### –®–∞–≥ 4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª `.env`:

```env
YOOMONEY_ACCESS_TOKEN=your_access_token_here
YOOMONEY_CLIENT_ID=your_client_id_here
YOOMONEY_CLIENT_SECRET=your_client_secret_here
```

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞—Å—Ç–µ—Ä–∞

–î–ª—è –≤—ã–ø–ª–∞—Ç—ã –º–∞—Å—Ç–µ—Ä—É —á–µ—Ä–µ–∑ –ÆMoney, –º–∞—Å—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω:
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ—à–µ–ª–µ–∫ –ÆMoney
2. –£–∫–∞–∑–∞—Ç—å –Ω–æ–º–µ—Ä –∫–æ—à–µ–ª—å–∫–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ (13-15 —Ü–∏—Ñ—Ä)
3. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –≤—ã–ø–ª–∞—Ç—ã –≤—ã–±—Ä–∞—Ç—å –º–µ—Ç–æ–¥ `yoomoney` –∏ —É–∫–∞–∑–∞—Ç—å –Ω–æ–º–µ—Ä –∫–æ—à–µ–ª—å–∫–∞

---

## üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ —á–µ—Ä–µ–∑ –ÆKassa

**Endpoint:** `POST /api/payments/create-yookassa`

**Request:**
```json
{
  "orderId": 123,
  "amount": 5000,
  "returnUrl": "https://your-app.com/payment/success"
}
```

**Response:**
```json
{
  "message": "–ü–ª–∞—Ç–µ–∂ —Å–æ–∑–¥–∞–Ω",
  "payment": {
    "id": 456,
    "orderId": 123,
    "amount": 5000,
    "status": "processing"
  },
  "yooKassa": {
    "paymentId": "2c5f4f8e-0001-5000-9000-000000000000",
    "confirmationUrl": "https://yookassa.ru/checkout/payments/...",
    "status": "pending"
  }
}
```

### –í—ã–ø–ª–∞—Ç–∞ –º–∞—Å—Ç–µ—Ä—É —á–µ—Ä–µ–∑ –ÆMoney

**Endpoint:** `POST /api/masters/wallet/payout`

**Request:**
```json
{
  "amount": 1000,
  "payoutMethod": "yoomoney",
  "payoutDetails": {
    "yoomoneyWallet": "410011234567890"
  }
}
```

**Response:**
```json
{
  "message": "–í—ã–ø–ª–∞—Ç–∞ —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —á–µ—Ä–µ–∑ –ÆMoney",
  "transaction": { ... },
  "yooMoney": {
    "requestId": "12345678",
    "status": "success"
  }
}
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Webhook –ø—Ä–æ–≤–µ—Ä–∫–∞

–ÆKassa –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ webhook'–∏. –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
- IP-–∞–¥—Ä–µ—Å–∞ –ÆKassa: `185.71.76.0/27`, `185.71.77.0/27`, `77.75.153.0/25`
- –ü—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–ø–∏—Å–∏ —á–µ—Ä–µ–∑ SDK (—Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

‚ö†Ô∏è **–ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª –≤ Git!**

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.env` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º –ÆKassa

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏ –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã (—Å–º. –≤—ã—à–µ)
3. –ü–ª–∞—Ç–µ–∂–∏ –Ω–µ –±—É–¥—É—Ç —Ä–µ–∞–ª—å–Ω–æ —Å–ø–∏—Å—ã–≤–∞—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞

### –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º –ÆMoney

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç
2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ—à–µ–ª–µ–∫
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–ø–ª–∞—Ç—ã –Ω–µ–±–æ–ª—å—à–∏–º–∏ —Å—É–º–º–∞–º–∏

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç –∑–∞–ø—É—Å–∫–∞

- [ ] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –º–∞–≥–∞–∑–∏–Ω –≤ –ÆKassa
- [ ] –ü–æ–ª—É—á–µ–Ω—ã Shop ID –∏ Secret Key
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω webhook URL
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`
- [ ] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –∫–æ—à–µ–ª–µ–∫ –ÆMoney
- [ ] –ü–æ–ª—É—á–µ–Ω OAuth —Ç–æ–∫–µ–Ω –ÆMoney
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ÆMoney
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω webhook
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤—ã–ø–ª–∞—Ç–∞ –º–∞—Å—Ç–µ—Ä—É

---

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "–ÆKassa –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ `YOOKASSA_SHOP_ID` –∏ `YOOKASSA_SECRET_KEY` –≤ `.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `.env` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `backend/`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `.env`

### Webhook –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å URL –∏–∑–≤–Ω–µ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ URL —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ÆKassa
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### –û—à–∏–±–∫–∞ –≤—ã–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –ÆMoney
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞ –∫–æ—à–µ–ª—å–∫–∞ (13-15 —Ü–∏—Ñ—Ä)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–Ω—ã–π –∏ –Ω–µ –∏—Å—Ç–µ–∫
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –≤–∞—à–µ–≥–æ –∫–æ—à–µ–ª—å–∫–∞ –ÆMoney

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ÆKassa](https://yookassa.ru/developers/api)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ÆMoney API](https://yoomoney.ru/docs)
- [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ–Ω–ª–∞–π–Ω-–∫–∞—Å—Å—ã (–§–ó-54)](https://yookassa.ru/developers/payments/receipts)



## üéØ –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å **–ÆKassa** (–ø—Ä–∏–µ–º –ø–ª–∞—Ç–µ–∂–µ–π) –∏ **–ÆMoney** (–≤—ã–ø–ª–∞—Ç—ã –º–∞—Å—Ç–µ—Ä–∞–º).

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ÆKassa (–ø—Ä–∏–µ–º –ø–ª–∞—Ç–µ–∂–µ–π –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤)

### –®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –ÆKassa

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://yookassa.ru/
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –º–∞–≥–∞–∑–∏–Ω
3. –ü—Ä–æ–π–¥–∏—Ç–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ò–ù–ù, –û–ì–†–ù –¥–ª—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü)

### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π

1. –í–æ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç: https://yookassa.ru/my
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" ‚Üí "–ö–ª—é—á–∏ API"
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - **Shop ID** (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–∞–≥–∞–∑–∏–Ω–∞)
   - **Secret Key** (—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á)

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook

1. –í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" ‚Üí "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
2. –£–∫–∞–∂–∏—Ç–µ URL –¥–ª—è webhook:
   ```
   https://your-domain.com/api/payments/webhook/yookassa
   ```
3. –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±—ã—Ç–∏—è:
   - ‚úÖ `payment.succeeded` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
   - ‚úÖ `payment.canceled` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –®–∞–≥ 4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª `.env`:

```env
YOOKASSA_SHOP_ID=your_shop_id_here
YOOKASSA_SECRET_KEY=your_secret_key_here
APP_URL=https://your-domain.com
```

### –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã:
- **–£—Å–ø–µ—à–Ω—ã–π –ø–ª–∞—Ç–µ–∂**: 5555 5555 5555 4444
- **–û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–π –ø–ª–∞—Ç–µ–∂**: 5555 5555 5555 4477
- CVV: –ª—é–±—ã–µ 3 —Ü–∏—Ñ—Ä—ã
- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: –ª—é–±–∞—è –±—É–¥—É—â–∞—è –¥–∞—Ç–∞

---

## üí∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ÆMoney (–≤—ã–ø–ª–∞—Ç—ã –º–∞—Å—Ç–µ—Ä–∞–º)

### –®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –ÆMoney

1. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ—à–µ–ª–µ–∫ –Ω–∞ https://yoomoney.ru/
2. –ü—Ä–æ–π–¥–∏—Ç–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API)

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞: https://yoomoney.ru/docs/payment-buttons
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ü–æ–ª—É—á–∏—Ç–µ:
   - **Client ID**
   - **Client Secret**

### –®–∞–≥ 3: –ü–æ–ª—É—á–µ–Ω–∏–µ OAuth —Ç–æ–∫–µ–Ω–∞

1. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ –ÆMoney:
   ```
   https://yoomoney.ru/oauth/authorize?client_id=YOUR_CLIENT_ID&response_type=code&redirect_uri=YOUR_REDIRECT_URI
   ```
2. –ü–æ–ª—É—á–∏—Ç–µ –∫–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–∑ redirect_uri
3. –û–±–º–µ–Ω—è–π—Ç–µ –∫–æ–¥ –Ω–∞ —Ç–æ–∫–µ–Ω:
   ```bash
   curl -X POST https://yoomoney.ru/oauth/token \
     -d "code=YOUR_CODE" \
     -d "client_id=YOUR_CLIENT_ID" \
     -d "grant_type=authorization_code" \
     -d "redirect_uri=YOUR_REDIRECT_URI" \
     -u "YOUR_CLIENT_ID:YOUR_CLIENT_SECRET"
   ```
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π `access_token`

### –®–∞–≥ 4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª `.env`:

```env
YOOMONEY_ACCESS_TOKEN=your_access_token_here
YOOMONEY_CLIENT_ID=your_client_id_here
YOOMONEY_CLIENT_SECRET=your_client_secret_here
```

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞—Å—Ç–µ—Ä–∞

–î–ª—è –≤—ã–ø–ª–∞—Ç—ã –º–∞—Å—Ç–µ—Ä—É —á–µ—Ä–µ–∑ –ÆMoney, –º–∞—Å—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω:
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ—à–µ–ª–µ–∫ –ÆMoney
2. –£–∫–∞–∑–∞—Ç—å –Ω–æ–º–µ—Ä –∫–æ—à–µ–ª—å–∫–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ (13-15 —Ü–∏—Ñ—Ä)
3. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –≤—ã–ø–ª–∞—Ç—ã –≤—ã–±—Ä–∞—Ç—å –º–µ—Ç–æ–¥ `yoomoney` –∏ —É–∫–∞–∑–∞—Ç—å –Ω–æ–º–µ—Ä –∫–æ—à–µ–ª—å–∫–∞

---

## üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ —á–µ—Ä–µ–∑ –ÆKassa

**Endpoint:** `POST /api/payments/create-yookassa`

**Request:**
```json
{
  "orderId": 123,
  "amount": 5000,
  "returnUrl": "https://your-app.com/payment/success"
}
```

**Response:**
```json
{
  "message": "–ü–ª–∞—Ç–µ–∂ —Å–æ–∑–¥–∞–Ω",
  "payment": {
    "id": 456,
    "orderId": 123,
    "amount": 5000,
    "status": "processing"
  },
  "yooKassa": {
    "paymentId": "2c5f4f8e-0001-5000-9000-000000000000",
    "confirmationUrl": "https://yookassa.ru/checkout/payments/...",
    "status": "pending"
  }
}
```

### –í—ã–ø–ª–∞—Ç–∞ –º–∞—Å—Ç–µ—Ä—É —á–µ—Ä–µ–∑ –ÆMoney

**Endpoint:** `POST /api/masters/wallet/payout`

**Request:**
```json
{
  "amount": 1000,
  "payoutMethod": "yoomoney",
  "payoutDetails": {
    "yoomoneyWallet": "410011234567890"
  }
}
```

**Response:**
```json
{
  "message": "–í—ã–ø–ª–∞—Ç–∞ —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —á–µ—Ä–µ–∑ –ÆMoney",
  "transaction": { ... },
  "yooMoney": {
    "requestId": "12345678",
    "status": "success"
  }
}
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Webhook –ø—Ä–æ–≤–µ—Ä–∫–∞

–ÆKassa –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ webhook'–∏. –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
- IP-–∞–¥—Ä–µ—Å–∞ –ÆKassa: `185.71.76.0/27`, `185.71.77.0/27`, `77.75.153.0/25`
- –ü—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–ø–∏—Å–∏ —á–µ—Ä–µ–∑ SDK (—Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

‚ö†Ô∏è **–ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª –≤ Git!**

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.env` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º –ÆKassa

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏ –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã (—Å–º. –≤—ã—à–µ)
3. –ü–ª–∞—Ç–µ–∂–∏ –Ω–µ –±—É–¥—É—Ç —Ä–µ–∞–ª—å–Ω–æ —Å–ø–∏—Å—ã–≤–∞—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞

### –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º –ÆMoney

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç
2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ—à–µ–ª–µ–∫
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–ø–ª–∞—Ç—ã –Ω–µ–±–æ–ª—å—à–∏–º–∏ —Å—É–º–º–∞–º–∏

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç –∑–∞–ø—É—Å–∫–∞

- [ ] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –º–∞–≥–∞–∑–∏–Ω –≤ –ÆKassa
- [ ] –ü–æ–ª—É—á–µ–Ω—ã Shop ID –∏ Secret Key
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω webhook URL
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`
- [ ] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –∫–æ—à–µ–ª–µ–∫ –ÆMoney
- [ ] –ü–æ–ª—É—á–µ–Ω OAuth —Ç–æ–∫–µ–Ω –ÆMoney
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ÆMoney
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω webhook
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤—ã–ø–ª–∞—Ç–∞ –º–∞—Å—Ç–µ—Ä—É

---

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "–ÆKassa –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ `YOOKASSA_SHOP_ID` –∏ `YOOKASSA_SECRET_KEY` –≤ `.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `.env` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `backend/`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `.env`

### Webhook –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å URL –∏–∑–≤–Ω–µ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ URL —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ÆKassa
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### –û—à–∏–±–∫–∞ –≤—ã–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –ÆMoney
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞ –∫–æ—à–µ–ª—å–∫–∞ (13-15 —Ü–∏—Ñ—Ä)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–Ω—ã–π –∏ –Ω–µ –∏—Å—Ç–µ–∫
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –≤–∞—à–µ–≥–æ –∫–æ—à–µ–ª—å–∫–∞ –ÆMoney

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ÆKassa](https://yookassa.ru/developers/api)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ÆMoney API](https://yoomoney.ru/docs)
- [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ–Ω–ª–∞–π–Ω-–∫–∞—Å—Å—ã (–§–ó-54)](https://yookassa.ru/developers/payments/receipts)






