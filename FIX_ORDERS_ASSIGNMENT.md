# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –° –ù–ê–ó–ù–ê–ß–ï–ù–ò–ï–ú –ó–ê–ö–ê–ó–û–í –ú–ê–°–¢–ï–†–ê–ú

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∞–±–ª–∏—Ü—ã `master_promotions`** - –∑–∞–ø—Ä–æ—Å —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü—ã
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–ª–æ–Ω–∫–∏ `subscription_type`** - –∑–∞–ø—Ä–æ—Å –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ —Ç–µ–∫—É—â—É—é —Å—Ö–µ–º—É –ë–î
3. **–ú–∞—Å—Ç–µ—Ä–∞ –Ω–µ –Ω–∞ —Å–º–µ–Ω–µ** - —Å–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞—è–≤–æ–∫ –º–∞—Å—Ç–µ—Ä–∞–º–∏:

1. **–ú–∞—Å—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ —Å–º–µ–Ω–µ** (`is_on_shift = 1`)
   - –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: –∫–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å —Å–º–µ–Ω—É"

2. **–°—Ç–∞—Ç—É—Å –º–∞—Å—Ç–µ—Ä–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å "available"**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ —Å–º–µ–Ω—ã

3. **–ú–∞—Å—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é**
   - –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: –ø—Ä–æ—Ñ–∏–ª—å ‚Üí –Ω–∞–∂–∞—Ç—å –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é ‚Üí –≤—ã–±—Ä–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ—Ö–Ω–∏–∫–∏

4. **–ú–∞—Å—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω** (–¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤)
   - –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: –ø—Ä–æ—Ñ–∏–ª—å ‚Üí "–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è" ‚Üí –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã

5. **–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã** (`repair_status = 'new'`)

## üõ†Ô∏è –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### 1. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º:
```bash
cd backend
node scripts/diagnose-orders-assignment.js
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –º–∞—Å—Ç–µ—Ä–æ–≤
- –î–æ—Å—Ç—É–ø–Ω—ã—Ö –º–∞—Å—Ç–µ—Ä–æ–≤
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–æ–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–∞—Å—Ç–µ—Ä–æ–≤:
```bash
cd backend
node scripts/fix-masters-for-testing.js
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- ‚úÖ –í–∫–ª—é—á–∞–µ—Ç —Å–º–µ–Ω—É —É –≤—Å–µ—Ö –º–∞—Å—Ç–µ—Ä–æ–≤ (`is_on_shift = 1`)
- ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å "available"
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç

### 3. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞:
```bash
cd backend
node scripts/create-test-order.js
```

–°–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º –º–∞—Å—Ç–µ—Ä–∞–º.

## üì± –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –º–∞—Å—Ç–µ—Ä–æ–≤:

1. **–û–±–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏
2. **–í–∫–ª—é—á–∏—Ç–µ —Å–º–µ–Ω—É** (–∫–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å —Å–º–µ–Ω—É" –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏)
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –±–ª–æ–∫ "–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è" –∏–ª–∏ –∫–Ω–æ–ø–∫—É "–ò–∑–º–µ–Ω–∏—Ç—å" (–∫–∞—Ä–∞–Ω–¥–∞—à)
   - –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ—Ö–Ω–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Ä–µ–º–æ–Ω—Ç–∏—Ä—É–µ—Ç–µ
   - –ù–∞–∂–º–∏—Ç–µ "–û–ö"
4. **–ü—Ä–æ–π–¥–∏—Ç–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

## üîç –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –∑–∞—è–≤–∫–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É:
   ```bash
   cd backend
   node scripts/diagnose-orders-assignment.js
   ```

2. –ï—Å–ª–∏ –º–∞—Å—Ç–µ—Ä–∞ –Ω–µ –Ω–∞ —Å–º–µ–Ω–µ, –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
   ```bash
   node scripts/fix-masters-for-testing.js
   ```

3. –ï—Å–ª–∏ –Ω–µ—Ç –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤, —Å–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π:
   ```bash
   node scripts/create-test-order.js
   ```

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:

- **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ç–∏–ø–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –∑–∞–∫–∞–∑–µ**
  - –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –∑–∞–∫–∞–∑ –Ω–∞ "–•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫", —É –º–∞—Å—Ç–µ—Ä–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è "–•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫"

- **–¢–∏–ø—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –¥–æ–ª–∂–Ω—ã —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å:**
  - ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: "–ú–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∫–∞"
  - ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: "–ú–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∞—è –ø–µ—á—å"
  - ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: "–ú–æ—Ä–æ–∑–∏–ª—å–Ω–∏–∫"
  - ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: "–ú–æ—Ä–æ–∑–∏–ª—å–Ω—ã–π –ª–∞—Ä—å"

- **–ú–∞—Å—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Ä–∞–¥–∏—É—Å–µ —Ä–∞–±–æ—Ç—ã** (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è)

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- ‚úÖ –ú–∞—Å—Ç–µ—Ä–∞ –ø–æ–ª—É—á–∞—é—Ç –∑–∞—è–≤–∫–∏ –ø–æ WebSocket
- ‚úÖ –ó–∞—è–≤–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- ‚úÖ –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–¥–±–æ—Ä–∞ –º–∞—Å—Ç–µ—Ä–æ–≤ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é, —Ä–µ–π—Ç–∏–Ω–≥, —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫—É


